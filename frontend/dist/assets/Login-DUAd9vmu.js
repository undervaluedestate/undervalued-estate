import{r as s,j as e,s as c}from"./index-jmXoZW_F.js";const d={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_API_URL:"http://localhost:5173",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlwZWhtbnhwemJ6eHpwYWtibWVoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkzODc5MzUsImV4cCI6MjA3NDk2MzkzNX0.UD15ECzDEd6Lx3s0stRlCANQvM6BLKD6_taxoN0trek",VITE_SUPABASE_URL:"https://ipehmnxpzbzxzpakbmeh.supabase.co"};function E(){const[n,w]=s.useState(""),[o,f]=s.useState(""),[i,I]=s.useState("signin"),[u,m]=s.useState(!1),[h,r]=s.useState(""),[g,l]=s.useState("");async function S(a){if(a.preventDefault(),r(""),l(""),!c){r("Auth not configured");return}try{if(m(!0),i==="signin"){const{error:t}=await c.auth.signInWithPassword({email:n,password:o});if(t)throw t;l("Signed in"),window.location.hash="#deals"}else{const x=`${(d==null?void 0:d.VITE_SITE_URL)||(typeof window<"u"?window.location.origin:"")}/#auth`,{error:p}=await c.auth.signUp({email:n,password:o,options:{emailRedirectTo:x}});if(p)throw p;l("Account created. You may be signed in automatically."),window.location.hash="#deals"}}catch(t){r((t==null?void 0:t.message)||"Failed")}finally{m(!1)}}return e.jsxs("div",{className:"card",style:{maxWidth:420,margin:"0 auto"},children:[e.jsxs("div",{className:"meta",style:{justifyContent:"space-between",marginBottom:12},children:[e.jsx("div",{style:{fontWeight:700},children:i==="signin"?"Sign in":"Create account"}),e.jsx("button",{className:"badge",onClick:()=>I(i==="signin"?"signup":"signin"),children:i==="signin"?"Need an account?":"Have an account?"})]}),h&&e.jsxs("div",{style:{color:"#ef4444",marginBottom:8},children:["Error: ",h]}),g&&e.jsx("div",{style:{color:"#16a34a",marginBottom:8},children:g}),e.jsxs("form",{onSubmit:S,className:"meta",style:{flexDirection:"column",gap:8},children:[e.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:a=>w(a.target.value),required:!0}),e.jsx("input",{type:"password",placeholder:"Password",value:o,onChange:a=>f(a.target.value),required:!0}),e.jsx("button",{className:"badge",type:"submit",disabled:u,children:u?"Please waitâ€¦":i==="signin"?"Sign in":"Sign up"})]}),e.jsx("div",{style:{marginTop:12,opacity:.7,fontSize:12},children:"Admins will be auto-promoted if their email is allowlisted on the API."})]})}export{E as default};
